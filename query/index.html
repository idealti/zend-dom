<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="zend-dom">  
    <link rel="canonical" href="https://docs.zendframework.com/query/">
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Querying HTML and XML - zend-dom - Zend Framework Docs</title>

    <link rel="stylesheet" href="/css/styles.css">
</head>
<body id="page-top">

    
    <div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">

            
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-tooltip data-placement="bottom" title="Go to the ZF homepage">
                    <img src="../img/zend-framework-logo.svg" height="28" alt="Zend Framework">
                </a>
            </span>
        </div>

        <div class="navbar-collapse collapse">

            
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://framework.zend.com/about">About</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/downloads">Install</a>
                </li>
                <li class="active">
                    <a href="https://docs.zendframework.com">Documentation</a>
                </li>
                <li>
                    <a href="https://www.zend.com/en/services/training">Training</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/blog">Blog</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/participate">Participate</a>
                </li>
            </ul>

            
            
                <div class="nav navbar-nav navbar-collapse visible-xs-block ">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">zend-dom</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href=".." class="subnavigation__link">zend-dom</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../intro/" class="subnavigation__link">Intro</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item subnavigation__list-item--active">
                                <a href="./" class="subnavigation__link">Querying HTML and XML</a>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="nav navbar-nav navbar-collapse visible-xs-block">
                <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</div>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-xs-8">
                <h1 class="header__title">
                    Documentation

                    
                        <small class="header__subtitle">zend-dom</small>
                    
                </h1>
            </div>

            
            <div class="col-xs-4 text-right">
                
                    

                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/zendframework/zend-dom/" class="header__link header__link--github" title="Go to repository of zend-dom">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="laminas-announcement">
    <div class="container">
        <div class="row">
            <div class="col-xs-12"><strong>
                This package has moved. Visit its replacement, <a href="https://docs.laminas.dev/laminas-dom/">laminas/laminas-dom.</a>
            </strong></div>
        </div>
    </div>
</div>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-xs-12 content" role="main">
            <!-- content:begin -->
                
                    <ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
    <li><a href="https://framework.zend.com/">Home</a></li>

    
        <li><a href="https://docs.zendframework.com/">Documentation</a></li>

        
            <li><a href="..">zend-dom</a></li>

            

            <li class="active">Querying HTML and XML</li>
        
    
</ol>






    
    

    <div>
        
    

    
    
        <div class="toc">
            <h6 class="toc__headline">In This Article</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#theory-of-operation" class="toc__link">Theory of Operation</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#methods-available" class="toc__link">Methods Available</a>
                    </li>
                
            </ul>
        </div>
    

    </div>

    <h1 id="querying-html-and-xml-documents">Querying HTML and XML Documents</h1>
<p><code>Zend\Dom\Query</code> provides mechanisms for querying XML and HTML documents
utilizing either XPath or CSS selectors. It was developed to aid with functional
testing of MVC applications, but could also be used for development of screen
scrapers.</p>
<p>CSS selector notation is provided as a simpler and more familiar notation for
web developers to utilize when querying documents with XML structures. The
notation should be familiar to anybody who has developed Cascading Style Sheets
or who utilizes javascript toolkits that provide functionality for selecting
nodes utilizing CSS selectors.  <a href="http://prototypejs.org/api/utility/dollar-dollar">Prototype's $$()</a>,
<a href="http://api.dojotoolkit.org/jsdoc/dojo/HEAD/dojo.query">Dojo's dojo.query</a>, and
<a href="https://jquery.com">jQuery</a> were all inspirations for the component.</p>
<h2 id="theory-of-operation">Theory of Operation</h2>
<p>To use <code>Zend\Dom\Query</code>, you instantiate a <code>Zend\Dom\Query</code> object, optionally
passing a document to query (a string). Once you have a document, you can use
either the <code>execute()</code> or <code>queryXpath()</code> methods; each method will return a
<code>Zend\Dom\NodeList</code> object with any matching nodes.</p>
<p>The primary difference between <code>Zend\Dom\Query</code> and using
<a href="http://php.net/domdocument">DOMDocument</a> + <a href="http://php.net/domxpath">DOMXPath</a>
is the ability to select against CSS + selectors. You can utilize any of the
following, in any combination:</p>
<ul>
<li><strong>element types</strong>: provide an element type to match: <code>div</code>, <code>a</code>, <code>span</code>, <code>h2</code>, etc.</li>
<li><strong>style attributes</strong>: CSS style attributes to match: <code>.error</code>, <code>div.error</code>,
  <code>label.required</code>, etc. If an element defines more than one style, this will
  match as long as the named style is present anywhere in the style declaration.</li>
<li><strong>id attributes</strong>: element ID attributes to match: <code>#content</code>, <code>div#nav</code>, etc.</li>
<li><strong>arbitrary attributes</strong>: arbitrary element attributes to match. Three
  different types of matching are provided:<ul>
<li><strong>exact match</strong>: the attribute <em>exactly</em> matches the specified string.
  <code>div[bar="baz"]</code> would match a <code>div</code> element with a <code>bar</code> attribute that
  exactly matches the value <code>baz</code>.</li>
<li><strong>word match</strong>: the attribute contains a <em>word</em> matching the string.
  <code>div[bar~="baz"]</code> would match a <code>div</code> element with a <code>bar</code> attribute that
  contains the word <code>baz</code>. <code>&lt;div bar="foo baz"&gt;</code> would match, but
  <code>&lt;div bar="foo bazbat"&gt;</code> would not.</li>
<li><strong>substring match</strong>: the attribute contains the string specified, whether or
  not it is a complete word. <code>div[bar*="baz"]</code> would match a <code>div</code> element
  with a <code>bar</code> attribute that contains the string <code>baz</code> anywhere within it.</li>
</ul>
</li>
<li><strong>direct descendents</strong>: utilize <code>&gt;</code> between selectors to denote direct
  descendents. <code>div &gt; span</code> would select only <code>span</code> elements that are direct
  descendents of a <code>div</code>. Can also be used with any of the selectors above.</li>
<li><strong>descendents</strong>: string together multiple selectors to indicate a hierarchy along which to search.
  <code>div .foo span #one</code> would select an element of id <code>one</code> that is a descendent
  of arbitrary depth beneath a <code>span</code> element, which is in turn a descendent of
  arbitrary depth beneath an element with a class of <code>foo</code>, that is an
  descendent of arbitrary depth beneath a <code>div</code> element. For example, it would
  match the link to the word 'One' in the listing below:</li>
</ul>
<pre><code class="language-html">    &lt;div&gt;
    &lt;table&gt;
        &lt;tr&gt;
            &lt;td class=&quot;foo&quot;&gt;
                &lt;div&gt;
                    Lorem ipsum &lt;span class=&quot;bar&quot;&gt;
                        &lt;a href=&quot;/foo/bar&quot; id=&quot;one&quot;&gt;One&lt;/a&gt;
                        &lt;a href=&quot;/foo/baz&quot; id=&quot;two&quot;&gt;Two&lt;/a&gt;
                        &lt;a href=&quot;/foo/bat&quot; id=&quot;three&quot;&gt;Three&lt;/a&gt;
                        &lt;a href=&quot;/foo/bla&quot; id=&quot;four&quot;&gt;Four&lt;/a&gt;
                    &lt;/span&gt;
                &lt;/div&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
    &lt;/div&gt;
</code></pre>

<p>Once you've performed your query, you can then work with the result object to
determine information about the nodes, as well as to pull them and/or their
content directly for examination and manipulation. <code>Zend\Dom\NodeList</code>
implements <code>Countable</code> and <code>Iterator</code>, and stores the results internally as a
<a href="http://php.net/domdocument">DOMDocument</a> and <a href="http://php.net/domnodelist">DOMNodeList</a>.</p>
<p>As an example, consider the following call, that selects against the HTML above:</p>
<pre><code class="language-php">use Zend\Dom\Query;

$dom = new Query($html);
$results = $dom-&gt;execute('.foo .bar a');

$count = count($results); // get number of matches: 4
foreach ($results as $result) {
    // $result is a DOMElement
}
</code></pre>

<p><code>Zend\Dom\Query</code> also allows straight XPath queries utilizing the <code>queryXpath()</code>
method; you can pass any valid XPath query to this method, and it will return a
<code>Zend\Dom\NodeList</code> object.</p>
<h2 id="methods-available">Methods Available</h2>
<p>Below is a listing of methods available in the various classes exposed by
zend-dom.</p>
<h3>Zend\Dom\Query</h3>
<p>The following methods are available to <code>Zend\Dom\Query</code>:</p>
<ul>
<li><code>setDocumentXml($document, $encoding = null)</code>: specify an XML string to query against.</li>
<li><code>setDocumentXhtml($document, $encoding = null)</code>: specify an XHTML string to query against.</li>
<li><code>setDocumentHtml($document, $encoding = null)</code>: specify an HTML string to query against.</li>
<li><code>setDocument($document, $encoding = null)</code>: specify a string to query against;
  <code>Zend\Dom\Query</code> will then attempt to autodetect the document type.</li>
<li><code>setEncoding($encoding)</code>: specify an encoding string to use. This encoding
  will be passed to <a href="http://php.net/domdocument.construct">DOMDocument's constructor</a>
  if specified.</li>
<li><code>getDocument()</code>: retrieve the original document string provided to the object.</li>
<li><code>getDocumentType()</code>: retrieve the document type of the document provided to
  the object; will be one of the <code>DOC_XML</code>, <code>DOC_XHTML</code>, or <code>DOC_HTML</code> class
  constants.</li>
<li><code>getEncoding()</code>: retrieves the specified encoding.</li>
<li><code>execute($query)</code>: query the document using CSS selector notation.</li>
<li><code>queryXpath($xPathQuery)</code>: query the document using XPath notation.</li>
</ul>
<h3>Zend\Dom\NodeList</h3>
<p>As mentioned previously, <code>Zend\Dom\NodeList</code> implements both <code>Iterator</code> and
<code>Countable</code>, and as such can be used in a <code>foreach()</code> loop as well as with the
<code>count()</code> function. Additionally, it exposes the following methods:</p>
<ul>
<li><code>getCssQuery()</code>: return the CSS selector query used to produce the result (if
  any).</li>
<li><code>getXpathQuery()</code>: return the XPath query used to produce the result.
  Internally, <code>Zend\Dom\Query</code> converts CSS selector queries to XPath, so this
  value will always be populated.</li>
<li><code>getDocument()</code>: retrieve the DOMDocument the selection was made against.</li>
</ul>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../intro/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
        </li>
    </ul>
</nav>




    <div class="help-wanted">
        <p>
            Found a mistake or want to contribute to the documentation?
            <a href="https://github.com/zendframework/zend-dom/edit/master/docs/book/query.md" target="_blank" class="help-wanted__link">
                Edit this page on GitHub!
            </a>
        </p>
    </div>

                
            <!-- content:end -->
            </div>
            <div class="col-md-3 col-xs-12 sidebar">
                
                    <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">zend-dom</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href=".." class="subnavigation__link">zend-dom</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../intro/" class="subnavigation__link">Intro</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item subnavigation__list-item--active">
                                <a href="./" class="subnavigation__link">Querying HTML and XML</a>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <h5>Zend Framework</h5>
                <ul>
                    <li><a href="https://framework.zend.com/">framework.zend.com</a></li>
                    <li><a href="https://docs.zendframework.com">docs.zendframework.com</a></li>
                    <li><a href="https://packages.zendframework.com">packages.zendframework.com</a></li>
                    <li><a href="https://apigility.org">apigility.org</a></li>
                    <li><a href="https://getexpressive.org/">getexpressive.org</a></li>
                </ul>
            </div>
        </div>

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">

            
            <div class="col-md-9">
                <h4 class="footer__headline">Copyright</h4>
                <p>&copy; 2006-2020 by <a href="https://www.zend.com/">Zend</a> by <a href="https://www.perforce.com/">Perforce</a>.</p>
            </div>

            
            <div class="col-md-3">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.laminas.dev" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://laminas.dev/chat/" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/zendframework" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/zfdevteam" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

<nav class="cookie-bar navbar navbar-fixed-bottom navbar-default hidden">
    <div class="container">
        <p class="navbar-text">
            We use cookies to allow you to dismiss dialogs such as the Laminas
            Project notification.
        </p>
        <button type="button" class="cookie-button btn btn-default navbar-btn">Allow Cookies</button>
    </div>
</nav>

    <script>
        var base_url = '..',
            siteName = 'zend-dom';
    </script>
    <script src="/js/scripts.js"></script>
    <script src="../search/main.js"></script>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>



</body>


</html>
